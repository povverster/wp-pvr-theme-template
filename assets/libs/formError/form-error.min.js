!function(t,e,o){function r(t,e){if("FORM"!==$(t).prop("tagName"))return console.error("Tagname have to be form"),!1;this.options={ln:"en",show_error_text:!0,show_modal:!0,show_message:!0,reactive_form:!0},void 0!=e.ln&&(this.options.ln=e.ln),void 0!=e.show_error_text&&(this.options.show_error_text=e.show_error_text),void 0!=e.show_modal&&(this.options.show_modal=e.show_modal),void 0!=e.show_message&&(this.options.show_message=e.show_message),void 0!=e.reactive_form&&(this.options.reactive_form=e.reactive_form),this.errors=[],this.el=t,this.$el=$(t),this.ln={},this.init=function(t){var e=this;e.ln=JSON.parse(t),this.options.reactive_form&&$(this.el.elements).each(function(t,o){$(this).on("blur",function(t){e.validateOne(e,this)})}),e.$el.on("submit",function(t){e.validateAll(e)||t.preventDefault()}),e.$el.find("input").each(function(t,e){$(this).fltooltip()}),e.$el.find("textarea").each(function(t,e){$(this).fltooltip()})},this.__loadJSON(this.init.bind(this),fe_root+"ln/"+this.options.ln+".json")}$=e,r.prototype.beforeSubmit=function(){return this.validateAll(this)},r.prototype.__loadJSON=function(t,e){var o=new XMLHttpRequest;o.overrideMimeType("application/json"),o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&"200"==o.status&&(t(o.responseText),$(document).trigger("fe_ln_loaded"))},o.send(null)},r.prototype.init_modal=function(){0==$("#fe_modal").length&&($("body").append('<div class="modal fade" tabindex="-1" role="dialog" id="fe_modal"> \t\t\t\t\t<div class="modal-dialog" role="document"> \t\t\t\t\t\t<div class="modal-content">  \t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\t\t\t\t\t\t\t<div class="modal-body"> \t\t\t\t\t\t\t</div>  \t\t\t\t\t\t</div>  \t\t\t\t\t</div>  \t\t\t\t</div>'),$("#fe_modal").flmodal())},r.prototype.showModal=function(t){this.init_modal(),$("#fe_modal").find(".modal-body").empty().append(t),$("#fe_modal").flmodal("show")},r.prototype.validateOne=function(t,e){var o=$(e),r=t.__getElementName(e),i=o.val();if(!o.prop("required")||i)if("email"!=o.attr("type")||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)){if(o.attr("repeat_to"))if(t.$el.find('name="'+o.attr("repeat_to")+'"').val()!=i)return void t.addError(e,r+" "+t.ln.repeat_error);t.addSuccess(e)}else t.addError(e,r+" "+t.ln.error_email);else t.addError(e,r+" "+t.ln.error_required)},r.prototype.__getElementName=function(t){var e=$(t).attr("fe-name");return e||(e=$(t).attr("name")),e},r.prototype.validateAll=function(t){t.resetErrors();var e=!1,o=[];return t.$el.find("[required]").each(function(r,i){var s=$(this),a=t.__getElementName(this);if(!s.val()){var n=a+" "+t.ln.error_required;t.addError(this,n),o.push(n),e=!0}}),t.$el.find('[type="email"]').each(function(r,i){var s=$(this),a=t.__getElementName(this);if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s.val())){var n=a+" "+t.ln.error_email;t.addError(this,n),o.push(n),e=!0}}),t.$el.find("[repeat_to]").each(function(r,i){var s=$(this),a=t.__getElementName(this);if(t.$el.find('name="'+s.attr("repeat_to")+'"').val()!=s.val()){var n=a+" "+t.ln.repeat_error;t.addError(this,n),o.push(n),e=!0}}),!e||(err_str=t.errorToString(o),t.options.show_message&&t.showErrorMessage(err_str),t.options.show_modal&&this.showModal(err_str),!1)},r.prototype.showSuccessMessage=function(){},r.prototype.errorToString=function(t){var e="";if(t.length>0){e+='<div class="fe_errors"><div class="fe_line">'+this.ln.error_send+"</div>";for(var o=0;o<t.length;o++)e+='<div class="fe_line">'+t[o]+"</div>";e+="</div>"}return e},r.prototype.showErrorMessage=function(t){},r.prototype.addSuccess=function(t){var e=$(t);e.removeClass("fe_error"),e.addClass("fe_suc"),this.removeNotification(e)},r.prototype.addError=function(t,e){var o=$(t);o.removeClass("fe_suc"),o.addClass("fe_error");o.attr("name");this.errors.push(e),this.options.show_error_text&&o.attr("data-original-title",e).attr("title",e).fltooltip("show")},r.prototype.removeNotification=function(t){t.fltooltip("hide")},r.prototype.resetErrors=function(){this.errors=[];for(var t=0;t<this.el.elements.length;t++)$(this.el.elements[t]).removeClass("fe_error");this.$el.find("input").each(function(t,e){$(this).fltooltip("hide")}),this.$el.find("textarea").each(function(t,e){$(this).fltooltip("hide")})},r.prototype.showSuccessModal=function(){var t=this;t.ln.success_send?t.showModal(t.ln.success_send):$(document).on("fe_ln_loaded",function(){t.showModal(t.ln.success_send)})},r.prototype.validate=function(){return this.validateAll(this)},t.fe=r}(window,jQuery);
